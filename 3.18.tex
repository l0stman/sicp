\documentclass[a4paper,12pt]{article}
\usepackage{listings}
\lstset{language=Lisp}

\begin{document}
\begin{lstlisting}
(define (cycle? x)
  (let ((visited '()))
    (define (iter x)
      (cond ((not (pair? x)) #f)
            ((memq x visited) #t)
            (else
             (set! visited (cons x visited))
             (iter (cdr x)))))
    (iter x)))
\end{lstlisting}
\end{document}
